!function(r){var t={};function n(e){if(t[e])return t[e].exports;var o=t[e]={i:e,l:!1,exports:{}};return r[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=r,n.c=t,n.d=function(r,t,e){n.o(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:e})},n.r=function(r){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,t){if(1&t&&(r=n(r)),8&t)return r;if(4&t&&"object"===typeof r&&r&&r.__esModule)return r;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:r}),2&t&&"string"!=typeof r)for(var o in r)n.d(e,o,function(t){return r[t]}.bind(null,o));return e},n.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(t,"a",t),t},n.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},n.p="/maposaic/",n(n.s=0)}([function(r,t){var n=function(r,t){return{x:r/4%t,y:Math.floor(r/4/t)}},e=function(r,t){return 4*(r.y*t+r.x)},o=function(r,t,n){return{r:r,g:t,b:n}},a=function(r,t,n,a,u,f,l){for(var c=[t];c.length>0;){var i=c.pop();if(i){var s=e(i,f);if(!u.has(s)){u.add(s),r[s]=a.r,r[s+1]=a.g,r[s+2]=a.b;var y={S:i.y<f-1?{x:i.x,y:i.y+1}:null,E:i.x<f-1?{x:i.x+1,y:i.y}:null,O:i.x>0?{x:i.x-1,y:i.y}:null,N:i.y>0?{x:i.x,y:i.y-1}:null};Object.values(y).forEach((function(t){var a,l;t&&!u.has(e(t,f))&&(a=o(r[e(t,f)],r[e(t,f)+1],r[e(t,f)+2]),l=n,Math.abs(a.r-l.r)<3&&Math.abs(a.g-l.g)<3&&Math.abs(a.b-l.b)<3)&&c.push(t)}))}}}};onmessage=function(r){var t=r.data,e=t.mapboxPixels,u=t.mapozaicData,f=t.W,l=t.H;!function(r,t,n,e,o){for(var a=0;a<e;a++)for(var u=0;u<n;u++){r[4*(a*n+u)]=t[4*((e-a-1)*n+u)],r[4*(a*n+u)+1]=t[4*((e-a-1)*n+u)+1],r[4*(a*n+u)+2]=t[4*((e-a-1)*n+u)+2],r[4*(a*n+u)+3]=t[4*((e-a-1)*n+u)+3];var f="".concat(r[4*(a*n+u)],",").concat(r[4*(a*n+u)+1],",").concat(r[4*(a*n+u)+2]);o[f]?o[f]=o[f]+1:o[f]=1}}(u,e,f,l,{});for(var c=new Set,i=0;i<u.length;i+=4)if(!c.has(i)){var s=o(u[i],u[i+1],u[i+2]),y=u[i]<50?o(Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())):o(255,255,255),p=n(i,f);a(u,p,s,y,c,f)}postMessage(u)}}]);
//# sourceMappingURL=0732dc95c4c8d9c9c2c0.worker.js.map