!function(r){var n={};function t(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return r[e].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=r,t.c=n,t.d=function(r,n,e){t.o(r,n)||Object.defineProperty(r,n,{enumerable:!0,get:e})},t.r=function(r){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,n){if(1&n&&(r=t(r)),8&n)return r;if(4&n&&"object"===typeof r&&r&&r.__esModule)return r;var e=Object.create(null);if(t.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:r}),2&n&&"string"!=typeof r)for(var o in r)t.d(e,o,function(n){return r[n]}.bind(null,o));return e},t.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(n,"a",n),n},t.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},t.p="/maposaic/",t(t.s=0)}([function(r,n){var t=function(r,n){return{x:r/4%n,y:Math.floor(r/4/n)}},e=function(r,n){return 4*(r.y*n+r.x)},o=function(r,n,t){return{r:r,g:n,b:t}},a=function(r,n,t,a,u,l,f){for(var c=[n];c.length>0;){var i=c.pop();if(!i)break;var y=e(i,l);if(u.has(y))break;u.add(y),r[y]=a.r,r[y+1]=a.g,r[y+2]=a.b;var x={NO:i.x>0&&i.y>0?{x:i.x-1,y:i.y-1}:null,N:i.y>0?{x:i.x,y:i.y-1}:null,NE:i.x<l-1&&i.y>0?{x:i.x+1,y:i.y-1}:null,O:i.x>0?{x:i.x-1,y:i.y}:null,E:i.x<l-1?{x:i.x+1,y:i.y}:null,SO:i.x>0&&i.y<f-1?{x:i.x-1,y:i.y+1}:null,S:i.y<l-1?{x:i.x,y:i.y+1}:null,SE:i.x<l-1&&i.y<f-1?{x:i.x+1,y:i.y+1}:null};Object.values(x).forEach((function(n){var a,u;n&&(a=o(r[e(n,l)],r[e(n,l)+1],r[e(n,l)+2]),u=t,Math.abs(a.r-u.r)<3&&Math.abs(a.g-u.g)<3&&Math.abs(a.b-u.b)<3)&&c.push(n)}))}};onmessage=function(r){var n=r.data,e=n.mapboxPixels,u=n.mapozaicData,l=n.W,f=n.H;!function(r,n,t,e,o){for(var a=0;a<e;a++)for(var u=0;u<t;u++){r[4*(a*t+u)]=n[4*((e-a-1)*t+u)],r[4*(a*t+u)+1]=n[4*((e-a-1)*t+u)+1],r[4*(a*t+u)+2]=n[4*((e-a-1)*t+u)+2],r[4*(a*t+u)+3]=n[4*((e-a-1)*t+u)+3];var l="".concat(r[4*(a*t+u)],",").concat(r[4*(a*t+u)+1],",").concat(r[4*(a*t+u)+2]);o[l]?o[l]=o[l]+1:o[l]=1}}(u,e,l,f,{});for(var c=new Set,i=0;i<u.length;i+=4)if(!c.has(i)){var y=o(u[i],u[i+1],u[i+2]),x=u[i]<50?o(Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())):o(255,255,255),s=t(i,l);a(u,s,y,x,c,l,f)}postMessage(u)}}]);
//# sourceMappingURL=869e9a4f9982ae4025bb.worker.js.map