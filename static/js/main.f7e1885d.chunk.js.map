{"version":3,"sources":["assets/spinner.png","Mapozaic/GeoSearchInput.tsx","Mapozaic/Drawer.tsx","Mapozaic/Mapozaic.tsx","App.tsx","serviceWorker.ts","index.tsx","Mapozaic/paint.worker.ts"],"names":["module","exports","GeoSearch","flyTo","currentCenter","setDrawerVisible","useState","searchText","setSearchText","options","setOptions","isSearching","setIsSearching","handleSearch","value","a","length","request","MAPBOX_TOKEN","fetch","res","json","body","features","optionChildren","map","option","place_name","split","address","rest","id","label","style","fontWeight","join","width","onSearch","onSelect","targetOption","find","center","placeholder","suffix","LoadingOutlined","SearchOutlined","Drawer","visible","mapboxStyleURL","changeMapStyle","setNewRoadColorThreshold","setNewSimilarColorTolerance","INITIAL_ROAD_COLOR_THRESHOLD","localRoadColorThreshold","setLocalRoadColorThreshold","INITIAL_SIMILAR_COLOR_TOLERANCE","localSimilarColorTolerance","setLocalSimilarColorTolerance","onSliderChange","changeCallback","placement","onClose","closable","Group","onChange","event","target","MAPBOX_STYLE_URL","road","water","administrative","min","max","range","onAfterChange","process","mapboxgl","accessToken","styles","height","position","paintWorker","PaintWorker","showMapboxCanvas","isMapbox","mapboxElement","document","getElementById","mosaicElement","opacity","MapboxGLMap","setMap","mapContainer","useRef","setMapboxStyleURL","isLoading","setIsLoading","roadColorThreshold","setRoadColorThreshold","similarColorTolerance","setSimilarColorTolerance","setCurrentCenter","useEffect","paintMosaic","newMap","mapboxCanvas","getCanvas","gl","getContext","console","log","webglWidth","drawingBufferWidth","webglHeight","drawingBufferHeight","viewportWidth","viewportHeight","maposaicCanvas","setAttribute","toString","maposaicContext","imageData","getImageData","maposaicData","data","mapboxPixels","Uint8Array","readPixels","RGBA","UNSIGNED_BYTE","onmessage","e","set","putImageData","postMessage","getCenter","LngLat","zoom","getZoom","remove","Map","container","current","on","resize","loaded","isMoving","isZooming","terminate","lng","lat","drawerVisible","className","ref","el","spinning","indicator","src","spinner","alt","newStyle","threshold","tolerance","setCenter","type","shape","onClick","icon","RightCircleFilled","App","Mapozaic","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message","Worker"],"mappings":"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","file":"static/js/main.f7e1885d.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","import React, { useState } from 'react'\nimport { AutoComplete, Input } from 'antd'\nimport { MAPBOX_TOKEN } from './Mapozaic'\nimport { DrawerPropsType } from './Drawer'\nimport { SearchOutlined, LoadingOutlined } from '@ant-design/icons'\n\ntype GeocoderFeature = {\n  id: string\n  place_name: string\n  center: [number, number]\n}\n\ntype GeocoderResult = {\n  features: GeocoderFeature[]\n}\nconst baseurl = 'https://api.mapbox.com/geocoding/v5/mapbox.places'\n\nconst GeoSearch = ({\n  flyTo,\n  currentCenter,\n  setDrawerVisible,\n}: {\n  flyTo: DrawerPropsType['flyTo']\n  currentCenter: DrawerPropsType['currentCenter']\n  setDrawerVisible: DrawerPropsType['setDrawerVisible']\n}) => {\n  const [searchText, setSearchText] = useState('')\n  const [options, setOptions] = useState<GeocoderFeature[]>([])\n  const [isSearching, setIsSearching] = useState(false)\n\n  const handleSearch = async (value: string) => {\n    setSearchText(value)\n    if (value.length < 1) {\n      setOptions([])\n      return\n    }\n    setIsSearching(true)\n    const request = `${baseurl}/${value}.json?limit=5&language=fr-FR&access_token=${MAPBOX_TOKEN}&proximity=${currentCenter[0]}%2C${currentCenter[1]}`\n    const res = await fetch(request)\n    const body: GeocoderResult = await res.json()\n    setIsSearching(false)\n    setOptions(body.features)\n  }\n\n  const handleSelect = (value: string) => {\n    const targetOption = options.find((option) => option.id === value)\n    if (targetOption) {\n      setDrawerVisible(false)\n      flyTo(targetOption.center)\n    }\n  }\n\n  const optionChildren = options.map((option) => {\n    const [address, ...rest] = option.place_name.split(',')\n    return {\n      value: option.id,\n      label: (\n        <div>\n          <div style={{ fontWeight: 500 }}>{address}</div>\n          <div>{rest.join('')}</div>\n        </div>\n      ),\n    }\n  })\n\n  return (\n    <AutoComplete\n      style={{ width: 200 }}\n      onSearch={handleSearch}\n      onSelect={handleSelect}\n      value={searchText}\n      placeholder=\"Search location\"\n      options={optionChildren}\n    >\n      <Input suffix={isSearching ? <LoadingOutlined /> : <SearchOutlined />} />\n    </AutoComplete>\n  )\n}\n\nexport default GeoSearch\n","import React, { useState } from 'react'\nimport { Drawer as AntDrawer, Radio, Divider, Slider } from 'antd'\nimport { RadioChangeEvent } from 'antd/lib/radio'\nimport { MAPBOX_STYLE_URL, INITIAL_ROAD_COLOR_THRESHOLD, INITIAL_SIMILAR_COLOR_TOLERANCE } from './Mapozaic'\nimport { SliderValue } from 'antd/lib/slider'\nimport GeoSearch from './GeoSearchInput'\n\nexport type DrawerPropsType = {\n  visible: boolean\n  setDrawerVisible: (visible: boolean) => void\n  mapboxStyleURL: string\n  changeMapStyle: (style: string) => void\n  setNewRoadColorThreshold: (threshold: number) => void\n  setNewSimilarColorTolerance: (tolerance: number) => void\n  flyTo: (center: [number, number]) => void\n  currentCenter: [number, number]\n}\n\nconst Drawer = ({\n  visible,\n  setDrawerVisible,\n  mapboxStyleURL,\n  changeMapStyle,\n  setNewRoadColorThreshold,\n  setNewSimilarColorTolerance,\n  flyTo,\n  currentCenter,\n}: DrawerPropsType) => {\n  const onStyleUrlChange = (event: RadioChangeEvent) => {\n    setDrawerVisible(false)\n    changeMapStyle(event.target.value)\n  }\n  const [localRoadColorThreshold, setLocalRoadColorThreshold] = useState(INITIAL_ROAD_COLOR_THRESHOLD)\n  const [localSimilarColorTolerance, setLocalSimilarColorTolerance] = useState(INITIAL_SIMILAR_COLOR_TOLERANCE)\n\n  const onSliderChange = (value: SliderValue, changeCallback: (n: number) => void) => {\n    if (typeof value === 'number') {\n      changeCallback(value)\n    } else {\n      changeCallback(value[0])\n    }\n  }\n\n  const handleRoadThresholdAfterChange = () => {\n    setNewRoadColorThreshold(localRoadColorThreshold)\n    setDrawerVisible(false)\n  }\n  const handleSimilarColorToleranceAfterChange = () => {\n    setNewSimilarColorTolerance(localSimilarColorTolerance)\n    setDrawerVisible(false)\n  }\n\n  return (\n    <AntDrawer visible={visible} placement=\"left\" onClose={() => setDrawerVisible(false)} closable={false}>\n      <GeoSearch flyTo={flyTo} currentCenter={currentCenter} setDrawerVisible={setDrawerVisible} />\n      <Divider />\n      <Radio.Group onChange={onStyleUrlChange} value={mapboxStyleURL}>\n        <Radio value={MAPBOX_STYLE_URL.road}>Road boundaries</Radio>\n        <Radio value={MAPBOX_STYLE_URL.water}>Water boundaries</Radio>\n        <Radio value={MAPBOX_STYLE_URL.administrative}>Administrative boundaries</Radio>\n      </Radio.Group>\n      <Divider />\n      <p>Boundary detection threshold</p>\n      <Slider\n        min={0}\n        max={255}\n        range={false}\n        value={localRoadColorThreshold}\n        onAfterChange={handleRoadThresholdAfterChange}\n        onChange={(value) => onSliderChange(value, setLocalRoadColorThreshold)}\n      />\n      <p>Fill Color Tolerance</p>\n      <Slider\n        min={0}\n        max={20}\n        range={false}\n        value={localSimilarColorTolerance}\n        onAfterChange={handleSimilarColorToleranceAfterChange}\n        onChange={(value) => onSliderChange(value, setLocalSimilarColorTolerance)}\n      />\n    </AntDrawer>\n  )\n}\n\nexport default Drawer\n","import React, { useState, useRef, useEffect } from 'react'\nimport mapboxgl from 'mapbox-gl'\n// import 'mapbox-gl/dist/mapbox-gl.css'\nimport { Button } from 'antd'\nimport { RightCircleFilled } from '@ant-design/icons'\nimport { Spin } from 'antd'\nimport spinner from '../assets/spinner.png'\n\nimport Drawer from './Drawer'\n\n// eslint-disable-next-line\nimport PaintWorker from 'worker-loader!./paint.worker'\n\nimport './style.css'\n\n// eslint-disable-next-line\nexport const MAPBOX_TOKEN: string = process.env['REACT_APP_MAPBOX_TOKEN'] || ''\nmapboxgl.accessToken = MAPBOX_TOKEN\n\nexport const MAPBOX_STYLE_URL = {\n  road: 'mapbox://styles/cartapuce/ck8vk01zo2e5w1ipmytroxgf4',\n  water: 'mapbox://styles/cartapuce/ck8ynyj0x022h1hpmffi87im9',\n  administrative: 'mapbox://styles/cartapuce/ck8vkvxjt27z71ila3b3jecka',\n  // regular: 'mapbox://styles/mapbox/streets-v11',\n}\n\nexport const INITIAL_ROAD_COLOR_THRESHOLD = 50\nexport const INITIAL_SIMILAR_COLOR_TOLERANCE = 3\n\nconst styles = {\n  width: '100vw',\n  height: 'calc(100vh)',\n  position: 'absolute',\n} as React.CSSProperties\n\nexport type RGBColor = { r: number; g: number; b: number }\nexport type imagePoint = { x: number; y: number }\n\nlet paintWorker = new PaintWorker()\n\nconst showMapboxCanvas = (isMapbox: boolean): void => {\n  const mapboxElement = document.getElementById('mapbox-cvs') as HTMLCanvasElement\n  const mosaicElement = document.getElementById('maposaic-cvs') as HTMLCanvasElement\n  mapboxElement.style.opacity = isMapbox ? '1' : '0'\n  mosaicElement.style.opacity = isMapbox ? '0' : '1'\n}\n\nconst MapboxGLMap = (): JSX.Element => {\n  const [map, setMap] = useState<mapboxgl.Map | null>(null)\n  const mapContainer = useRef<HTMLDivElement | null>(null)\n\n  const [mapboxStyleURL, setMapboxStyleURL] = useState(MAPBOX_STYLE_URL.road)\n  const [isLoading, setIsLoading] = useState(false)\n  const [roadColorThreshold, setRoadColorThreshold] = useState(INITIAL_ROAD_COLOR_THRESHOLD)\n  const [similarColorTolerance, setSimilarColorTolerance] = useState(INITIAL_SIMILAR_COLOR_TOLERANCE)\n  const [currentCenter, setCurrentCenter] = useState<[number, number]>([0, 0])\n\n  useEffect(() => {\n    const paintMosaic = async (newMap: mapboxgl.Map): Promise<void> => {\n      setIsLoading(true)\n      showMapboxCanvas(true)\n      const mapboxCanvas = newMap.getCanvas()\n      const gl = mapboxCanvas.getContext('webgl')\n      if (!gl) {\n        console.log('pas de gl')\n        return\n      }\n      const webglWidth = gl.drawingBufferWidth\n      const webglHeight = gl.drawingBufferHeight\n      const viewportWidth = webglWidth\n      const viewportHeight = webglHeight\n\n      const maposaicCanvas = document.getElementById('maposaic-cvs') as HTMLCanvasElement\n      maposaicCanvas.setAttribute('width', viewportWidth.toString())\n      maposaicCanvas.setAttribute('height', viewportHeight.toString())\n      const maposaicContext = maposaicCanvas.getContext('2d')\n      if (!maposaicContext) {\n        return\n      }\n      const imageData = maposaicContext.getImageData(0, 0, maposaicCanvas.width, maposaicCanvas.height)\n      const maposaicData = imageData.data\n\n      const mapboxPixels = new Uint8Array(gl.drawingBufferWidth * gl.drawingBufferHeight * 4)\n      gl.readPixels(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight, gl.RGBA, gl.UNSIGNED_BYTE, mapboxPixels)\n\n      paintWorker.onmessage = function (e): void {\n        imageData.data.set(e.data)\n        maposaicContext.putImageData(imageData, 0, 0)\n        showMapboxCanvas(false)\n        setIsLoading(false)\n      }\n      paintWorker.postMessage({\n        mapboxPixels,\n        maposaicData,\n        webglWidth,\n        webglHeight,\n        viewportHeight,\n        viewportWidth,\n        roadColorThreshold,\n        similarColorTolerance,\n      })\n    }\n\n    const center = map ? map.getCenter() : new mapboxgl.LngLat(2.338272, 48.858796)\n    const zoom = map ? map.getZoom() : 12\n\n    if (map) {\n      map.remove()\n    }\n    const newMap = new mapboxgl.Map({\n      container: mapContainer.current ? mapContainer.current : '',\n      style: mapboxStyleURL,\n      zoom,\n      center,\n    })\n    newMap.on('load', () => {\n      setMap(newMap)\n      newMap.resize()\n    })\n    newMap.on('dragstart', showMapboxCanvas)\n    newMap.on('zoomstart', showMapboxCanvas)\n    newMap.on('render', () => {\n      if (!newMap.loaded() || newMap.isMoving() || newMap.isZooming()) {\n        return\n      }\n      paintWorker.terminate()\n      paintWorker = new PaintWorker()\n      paintMosaic(newMap)\n      setCurrentCenter([newMap.getCenter().lng, newMap.getCenter().lat])\n    })\n    // eslint-disable-next-line\n  }, [roadColorThreshold, similarColorTolerance, mapboxStyleURL])\n\n  const [drawerVisible, setDrawerVisible] = useState(false)\n\n  const changeMapStyle = (newStyle: string) => {\n    showMapboxCanvas(true)\n    setIsLoading(true)\n    setMapboxStyleURL(newStyle)\n  }\n\n  const setNewRoadColorThreshold = (threshold: number) => {\n    setRoadColorThreshold(threshold)\n    setIsLoading(true)\n  }\n  const setNewSimilarColorTolerance = (tolerance: number) => {\n    setSimilarColorTolerance(tolerance)\n    setIsLoading(true)\n  }\n\n  const flyTo = (center: [number, number]) => {\n    if (!map) {\n      return\n    }\n    showMapboxCanvas(true)\n    setIsLoading(true)\n    map.setCenter(center)\n  }\n\n  return (\n    <div className=\"container\">\n      <canvas className=\"mosaic-canvas\" width=\"300\" height=\"300\" id=\"maposaic-cvs\" />\n      <div id=\"mapbox-cvs\" className=\"mapbox-canvas\" ref={(el) => (mapContainer.current = el)} style={styles} />\n      <Spin spinning={isLoading} indicator={<img className=\"spinner\" src={spinner} alt=\"spin\" />} />\n      <div className=\"overmap\">\n        <Drawer\n          visible={drawerVisible}\n          setDrawerVisible={setDrawerVisible}\n          changeMapStyle={changeMapStyle}\n          mapboxStyleURL={mapboxStyleURL}\n          setNewRoadColorThreshold={setNewRoadColorThreshold}\n          setNewSimilarColorTolerance={setNewSimilarColorTolerance}\n          flyTo={flyTo}\n          currentCenter={currentCenter}\n        />\n        <Button\n          type=\"primary\"\n          shape=\"circle\"\n          onClick={() => {\n            setDrawerVisible(true)\n          }}\n          icon={<RightCircleFilled />}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default MapboxGLMap\n","import React from 'react'\nimport Mapozaic from './Mapozaic/Mapozaic'\n\nfunction App() {\n  return <Mapozaic />\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n)\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void\n  onUpdate?: (registration: ServiceWorkerRegistration) => void\n}\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.')\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister()\n      })\n      .catch((error) => {\n        console.error(error.message)\n      })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"e60194eb2689f829a04c.worker.js\");\n};"],"sourceRoot":""}