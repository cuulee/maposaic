(this.webpackJsonpmaposaic=this.webpackJsonpmaposaic||[]).push([[0],{146:function(e,t,a){},161:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(3),c=a.n(i),o=(a(91),a(92),a(83)),s=(a(94),a(80)),l=a(53),u=a.n(l),m=a(77),d=a(20),f=a(54),p=a.n(f),g=a(163),v=(a(97),a(84)),b=(a(99),a(36)),h=function(e){var t=e.visible,a=e.setDrawerVisible,n=e.mapboxStyleURL,i=e.changeMapStyle;return r.a.createElement(v.a,{visible:t,placement:"left",onClose:function(){return a(!1)}},r.a.createElement(b.a.Group,{onChange:function(e){i(e.target.value)},value:n},r.a.createElement(b.a,{value:j.road},"Roads"),r.a.createElement(b.a,{value:j.administrative},"Administrative boundaries")))},w=a(162),y=a(55),E=a.n(y);a(146);p.a.accessToken="pk.eyJ1IjoiY2FydGFwdWNlIiwiYSI6ImNrODM4ZmRnbjB2cnYzZ21zZGpidGdtanEifQ.A61azybL3BMEPJtn42dXKw";var j={administrative:"mapbox://styles/cartapuce/ck8vkvxjt27z71ila3b3jecka",road:"mapbox://styles/cartapuce/ck8vk01zo2e5w1ipmytroxgf4"},x={width:"100vw",height:"calc(100vh)",position:"absolute"},k=new E.a,B=function(e){var t=document.getElementById("mapbox-cvs"),a=document.getElementById("maposaic-cvs");t.style.opacity=e?"1":"0",a.style.opacity=e?"0":"1"},O=function(){var e=Object(n.useState)(null),t=Object(d.a)(e,2),a=t[0],i=t[1],c=Object(n.useRef)(null),l=Object(n.useState)(j.road),f=Object(d.a)(l,2),v=f[0],b=f[1],y=Object(n.useState)(!1),O=Object(d.a)(y,2),S=O[0],I=O[1],W=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r,i,c,o,s,l,m,d,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I(!0),B(!0),a=t.getCanvas(),n=a.getContext("webgl")){e.next=7;break}return console.log("pas de gl"),e.abrupt("return");case 7:if(r=n.drawingBufferWidth,i=n.drawingBufferHeight,c=r,o=i,(s=document.getElementById("maposaic-cvs")).setAttribute("width",c.toString()),s.setAttribute("height",o.toString()),l=s.getContext("2d")){e.next=17;break}return e.abrupt("return");case 17:m=l.getImageData(0,0,s.width,s.height),d=m.data,f=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4),n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,f),k.onmessage=function(e){m.data.set(e.data),l.putImageData(m,0,0),B(!1),I(!1)},k.postMessage({mapboxPixels:f,maposaicData:d,webglWidth:r,webglHeight:i,viewportHeight:o,viewportWidth:c});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=new p.a.Map({container:c.current?c.current:"",style:v,zoom:12,center:{lng:2.338272,lat:48.858796}});e.on("load",(function(){i(e),e.resize()})),e.on("dragstart",B),e.on("zoomstart",B),e.on("render",(function(){!e.loaded()||e.isMoving()||e.isZooming()||(k.terminate(),k=new E.a,W(e))}))}),[]);var z=Object(n.useState)(!1),M=Object(d.a)(z,2),N=M[0],D=M[1],A=Object(n.useState)(!1),C=Object(d.a)(A,2),G=C[0],R=C[1];Object(n.useEffect)((function(){a&&N&&(a.setStyle(v),D(!1))}),[v,a,N]);return r.a.createElement("div",{className:"container"},r.a.createElement("canvas",{className:"mosaic-canvas",width:"300",height:"300",id:"maposaic-cvs"}),r.a.createElement("div",{id:"mapbox-cvs",className:"mapbox-canvas",ref:function(e){return c.current=e},style:x}),r.a.createElement(s.a,{spinning:S,indicator:r.a.createElement(w.a,null)}),r.a.createElement("div",{className:"overmap"},r.a.createElement(h,{visible:G,setDrawerVisible:R,changeMapStyle:function(e){v!==e&&(I(!0),b(e),D(!0))},mapboxStyleURL:v}),r.a.createElement(o.a,{type:"primary",shape:"circle",onClick:function(){R(!0)},icon:r.a.createElement(g.a,null)})))};var S=function(){return r.a.createElement(O,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},55:function(e,t,a){e.exports=function(){return new Worker(a.p+"f66370dd5c371c34f70c.worker.js")}},86:function(e,t,a){e.exports=a(161)},91:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.b57c1cd8.chunk.js.map