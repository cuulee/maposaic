(this.webpackJsonpmaposaic=this.webpackJsonpmaposaic||[]).push([[0],[,,,function(e,t,n){e.exports=function(){return new Worker(n.p+"57e96b48d5855b781de5.worker.js")}},,,,,function(e,t,n){e.exports=n(17)},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),i=n.n(o),c=(n(13),n(14),n(1)),s=n.n(c),u=n(7),d=n(4),l=n(2),m=n.n(l),g=n(3),f=n.n(g),p=(n(16),{width:"100vw",height:"calc(100vh)",position:"absolute"}),w=new f.a,h=function(){var e=document.getElementById("mapbox-cvs"),t=document.getElementById("mapozaic-cvs");e.style.opacity="1",t.style.opacity="0"},v=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],o=t[1],i=Object(a.useRef)(null),c=Object(a.useState)(!1),l=Object(d.a)(c,2),g=l[0],v=l[1],b=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,r,o,i,c,u,d,l,m,g;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!0),h(),n=t.getCanvas(),a=n.getContext("webgl")){e.next=7;break}return console.log("pas de gl"),e.abrupt("return");case 7:if(r=a.drawingBufferWidth,o=a.drawingBufferHeight,i=r,c=o,(u=document.getElementById("mapozaic-cvs")).setAttribute("width",i.toString()),u.setAttribute("height",c.toString()),d=u.getContext("2d")){e.next=17;break}return e.abrupt("return");case 17:l=d.getImageData(0,0,u.width,u.height),m=l.data,g=new Uint8Array(a.drawingBufferWidth*a.drawingBufferHeight*4),a.readPixels(0,0,a.drawingBufferWidth,a.drawingBufferHeight,a.RGBA,a.UNSIGNED_BYTE,g),w.onmessage=function(e){l.data.set(e.data),d.putImageData(l,0,0),document.getElementById("mapbox-cvs").style.opacity="0",u.style.opacity="1",v(!1)},w.postMessage({mapboxPixels:g,mapozaicData:m,webglWidth:r,webglHeight:o,viewportHeight:c,viewportWidth:i});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){m.a.accessToken="pk.eyJ1IjoiY2FydGFwdWNlIiwiYSI6ImNrODM4ZmRnbjB2cnYzZ21zZGpidGdtanEifQ.A61azybL3BMEPJtn42dXKw";!n&&i&&function(e){var t=new m.a.Map({container:e.current?e.current:"",style:"mapbox://styles/cartapuce/ck831v1pi187r1inxwf7np531",zoom:12,center:{lng:2.338272,lat:48.858796}});t.on("load",(function(){o(t),t.resize()})),t.on("dragstart",h),t.on("zoomstart",h),t.on("render",(function(){!t.loaded()||t.isMoving()||t.isZooming()||(w.terminate(),w=new f.a,b(t))}))}(i)}),[n]),r.a.createElement("div",{className:"container"},r.a.createElement("canvas",{className:"mozaic",width:"300",height:"300",id:"mapozaic-cvs"}),r.a.createElement("div",{id:"mapbox-cvs",className:"mapbox-cvs",ref:function(e){return i.current=e},style:p}),g&&r.a.createElement("div",{className:"loading"},"Loading..."))};var b=function(){return r.a.createElement(v,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.4d0715d1.chunk.js.map