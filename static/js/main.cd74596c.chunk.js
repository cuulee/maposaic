(this.webpackJsonpmaposaic=this.webpackJsonpmaposaic||[]).push([[0],{102:function(e,t,a){e.exports=a(195)},107:function(e,t,a){},184:function(e,t,a){},195:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),c=a.n(o),i=(a(107),a(108),a(100)),s=(a(110),a(97)),l=a(69),u=a.n(l),m=a(91),d=a(9),f=a(46),b=a.n(f),g=a(198),p=(a(113),a(99)),h=(a(196),a(72)),v=(a(117),a(93)),w=(a(119),a(49)),j=function(e){var t=e.visible,a=e.setDrawerVisible,o=e.mapboxStyleURL,c=e.changeMapStyle,i=e.setNewRoadColorThreshold,s=e.setNewSimilarColorTolerance,l=Object(n.useState)(x),u=Object(d.a)(l,2),m=u[0],f=u[1],b=Object(n.useState)(C),g=Object(d.a)(b,2),j=g[0],E=g[1],y=function(e,t){t("number"===typeof e?e:e[0])};return r.a.createElement(p.a,{visible:t,placement:"left",onClose:function(){return a(!1)}},r.a.createElement(w.a.Group,{onChange:function(e){c(e.target.value)},value:o},r.a.createElement(w.a,{value:S.road},"Roads"),r.a.createElement(w.a,{value:S.administrative},"Administrative boundaries")),r.a.createElement(v.a,null),r.a.createElement("p",null,"Boundary detection threshold"),r.a.createElement(h.a,{min:0,max:255,range:!1,value:m,onAfterChange:function(){return i(m)},onChange:function(e){return y(e,f)}}),r.a.createElement("p",null,"Fill Color Tolerance"),r.a.createElement(h.a,{min:0,max:20,range:!1,value:j,onAfterChange:function(){return s(j)},onChange:function(e){return y(e,E)}}))},E=a(197),y=a(70),O=a.n(y);a(184);b.a.accessToken="pk.eyJ1IjoiY2FydGFwdWNlIiwiYSI6ImNrODM4ZmRnbjB2cnYzZ21zZGpidGdtanEifQ.A61azybL3BMEPJtn42dXKw";var S={administrative:"mapbox://styles/cartapuce/ck8vkvxjt27z71ila3b3jecka",road:"mapbox://styles/cartapuce/ck8vk01zo2e5w1ipmytroxgf4"},x=50,C=3,k={width:"100vw",height:"calc(100vh)",position:"absolute"},B=new O.a,N=function(e){var t=document.getElementById("mapbox-cvs"),a=document.getElementById("maposaic-cvs");t.style.opacity=e?"1":"0",a.style.opacity=e?"0":"1"},I=function(){var e=Object(n.useState)(null),t=Object(d.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(new b.a.LngLat(2.338272,48.858796)),l=Object(d.a)(c,2),f=l[0],p=l[1],h=Object(n.useState)(12),v=Object(d.a)(h,2),w=v[0],y=v[1],I=Object(n.useRef)(null),T=Object(n.useState)(S.road),W=Object(d.a)(T,2),z=W[0],A=W[1],M=Object(n.useState)(!1),R=Object(d.a)(M,2),D=R[0],G=R[1],H=Object(n.useState)(x),L=Object(d.a)(H,2),Z=L[0],J=L[1],U=Object(n.useState)(C),Y=Object(d.a)(U,2),F=Y[0],P=Y[1],V=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r,o,c,i,s,l,m,d,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G(!0),N(!0),a=t.getCanvas(),n=a.getContext("webgl")){e.next=7;break}return console.log("pas de gl"),e.abrupt("return");case 7:if(r=n.drawingBufferWidth,o=n.drawingBufferHeight,c=r,i=o,(s=document.getElementById("maposaic-cvs")).setAttribute("width",c.toString()),s.setAttribute("height",i.toString()),l=s.getContext("2d")){e.next=17;break}return e.abrupt("return");case 17:m=l.getImageData(0,0,s.width,s.height),d=m.data,f=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4),n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,f),B.onmessage=function(e){m.data.set(e.data),l.putImageData(m,0,0),N(!1),G(!1)},B.postMessage({mapboxPixels:f,maposaicData:d,webglWidth:r,webglHeight:o,viewportHeight:i,viewportWidth:c,roadColorThreshold:Z,similarColorTolerance:F});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=new b.a.Map({container:I.current?I.current:"",style:z,zoom:w,center:f});e.on("load",(function(){o(e),e.resize()})),e.on("dragstart",N),e.on("zoomstart",N),e.on("render",(function(){!e.loaded()||e.isMoving()||e.isZooming()||(p(e.getCenter()),y(e.getZoom()),B.terminate(),B=new O.a,V(e))}))}),[Z,F]);var K=Object(n.useState)(!1),Q=Object(d.a)(K,2),X=Q[0],$=Q[1],_=Object(n.useState)(!1),q=Object(d.a)(_,2),ee=q[0],te=q[1];Object(n.useEffect)((function(){a&&X&&(a.setStyle(z),$(!1))}),[z,a,X]);return r.a.createElement("div",{className:"container"},r.a.createElement("canvas",{className:"mosaic-canvas",width:"300",height:"300",id:"maposaic-cvs"}),r.a.createElement("div",{id:"mapbox-cvs",className:"mapbox-canvas",ref:function(e){return I.current=e},style:k}),r.a.createElement(s.a,{spinning:D,indicator:r.a.createElement(E.a,null)}),r.a.createElement("div",{className:"overmap"},r.a.createElement(j,{visible:ee,setDrawerVisible:te,changeMapStyle:function(e){z!==e&&(G(!0),A(e),$(!0))},mapboxStyleURL:z,setNewRoadColorThreshold:function(e){J(e),G(!0)},setNewSimilarColorTolerance:function(e){P(e),G(!0)}}),r.a.createElement(i.a,{type:"primary",shape:"circle",onClick:function(){te(!0)},icon:r.a.createElement(g.a,null)})))};var T=function(){return r.a.createElement(I,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},70:function(e,t,a){e.exports=function(){return new Worker(a.p+"0a54773b9c981e78242e.worker.js")}}},[[102,1,2]]]);
//# sourceMappingURL=main.cd74596c.chunk.js.map