(this.webpackJsonpmaposaic=this.webpackJsonpmaposaic||[]).push([[0],{109:function(e,t){e.exports="data:image/png;base64,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"},124:function(e,t,a){e.exports=a(234)},129:function(e,t,a){},225:function(e,t,a){},234:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),i=a.n(c),o=(a(129),a(91),a(51)),l=(a(131),a(117)),s=a(45),u=a.n(s),m=a(57),g=a(11),b=a(66),A=a.n(b),p=a(239),d=a(109),h=a.n(d),v=(a(134),a(120)),f=(a(236),a(90)),C=(a(138),a(52)),y=(a(140),a(88)),w=(a(235),a(119)),G=(a(145),a(121)),x=a(122),I=a(237),j=a(238),O=function(e){var t=e.flyTo,a=e.currentCenter,c=e.setDrawerVisible,i=Object(n.useState)(""),o=Object(g.a)(i,2),l=o[0],s=o[1],b=Object(n.useState)([]),A=Object(g.a)(b,2),p=A[0],d=A[1],h=Object(n.useState)(!1),v=Object(g.a)(h,2),f=v[0],C=v[1],y=function(){var e=Object(m.a)(u.a.mark((function e(t){var n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(t),!(t.length<1)){e.next=4;break}return d([]),e.abrupt("return");case 4:return C(!0),n="".concat("https://api.mapbox.com/geocoding/v5/mapbox.places","/").concat(t,".json?limit=5&language=fr-FR&access_token=").concat(N,"&proximity=").concat(a[0],"%2C").concat(a[1]),e.next=8,fetch(n);case 8:return r=e.sent,e.next=11,r.json();case 11:c=e.sent,C(!1),d(c.features);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=p.map((function(e){var t=e.place_name.split(","),a=Object(x.a)(t),n=a[0],c=a.slice(1);return{value:e.id,label:r.a.createElement("div",null,r.a.createElement("div",{style:{fontWeight:500}},n),r.a.createElement("div",null,c.join("")))}}));return r.a.createElement(w.a,{style:{width:200},onSearch:y,onSelect:function(e){var a=p.find((function(t){return t.id===e}));a&&(c(!1),t(a.center))},value:l,placeholder:"Search location",options:O},r.a.createElement(G.a,{suffix:f?r.a.createElement(I.a,null):r.a.createElement(j.a,null)}))},J=function(e){var t=e.visible,a=e.setDrawerVisible,c=e.mapboxStyleURL,i=e.changeMapStyle,o=e.setNewRoadColorThreshold,l=e.setNewSimilarColorTolerance,s=e.flyTo,u=e.currentCenter,m=Object(n.useState)(z),b=Object(g.a)(m,2),A=b[0],p=b[1],d=Object(n.useState)(U),h=Object(g.a)(d,2),w=h[0],G=h[1],x=function(e,t){t("number"===typeof e?e:e[0])};return r.a.createElement(v.a,{visible:t,placement:"left",onClose:function(){return a(!1)},closable:!1},r.a.createElement(O,{flyTo:s,currentCenter:u,setDrawerVisible:a}),r.a.createElement(y.a,null),r.a.createElement(C.a.Group,{onChange:function(e){a(!1),i(e.target.value)},value:c},r.a.createElement(C.a,{value:Y.road},"Road boundaries"),r.a.createElement(C.a,{value:Y.water},"Water boundaries"),r.a.createElement(C.a,{value:Y.administrative},"Administrative boundaries")),r.a.createElement(y.a,null),r.a.createElement("p",null,"Boundary detection threshold"),r.a.createElement(f.a,{min:0,max:255,range:!1,value:A,onAfterChange:function(){o(A),a(!1)},onChange:function(e){return x(e,p)}}),r.a.createElement("p",null,"Fill Color Tolerance"),r.a.createElement(f.a,{min:0,max:20,range:!1,value:w,onAfterChange:function(){l(w),a(!1)},onChange:function(e){return x(e,G)}}))},E=a(89),W=a.n(E),N=(a(225),"pk.eyJ1IjoiY2FydGFwdWNlIiwiYSI6ImNrODM4ZmRnbjB2cnYzZ21zZGpidGdtanEifQ.A61azybL3BMEPJtn42dXKw");A.a.accessToken=N;var Y={road:"mapbox://styles/cartapuce/ck8vk01zo2e5w1ipmytroxgf4",water:"mapbox://styles/cartapuce/ck8ynyj0x022h1hpmffi87im9",administrative:"mapbox://styles/cartapuce/ck8vkvxjt27z71ila3b3jecka"},z=50,U=3,R={width:"100vw",height:"calc(100vh)",position:"absolute"},B=new W.a,k=function(e){var t=document.getElementById("mapbox-cvs"),a=document.getElementById("maposaic-cvs");t.style.opacity=e?"1":"0",a.style.opacity=e?"0":"1"},S=function(){var e=Object(n.useState)(null),t=Object(g.a)(e,2),a=t[0],c=t[1],i=Object(n.useRef)(null),s=Object(n.useState)(Y.road),b=Object(g.a)(s,2),d=b[0],v=b[1],f=Object(n.useState)(!1),C=Object(g.a)(f,2),y=C[0],w=C[1],G=Object(n.useState)(z),x=Object(g.a)(G,2),I=x[0],j=x[1],O=Object(n.useState)(U),E=Object(g.a)(O,2),N=E[0],S=E[1],Z=Object(n.useState)([0,0]),P=Object(g.a)(Z,2),V=P[0],T=P[1];Object(n.useEffect)((function(){var e=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r,c,i,o,l,s,m,g,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(!0),k(!0),a=t.getCanvas(),n=a.getContext("webgl")){e.next=7;break}return console.log("pas de gl"),e.abrupt("return");case 7:if(r=n.drawingBufferWidth,c=n.drawingBufferHeight,i=r,o=c,(l=document.getElementById("maposaic-cvs")).setAttribute("width",i.toString()),l.setAttribute("height",o.toString()),s=l.getContext("2d")){e.next=17;break}return e.abrupt("return");case 17:m=s.getImageData(0,0,l.width,l.height),g=m.data,b=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4),n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,b),B.onmessage=function(e){m.data.set(e.data),s.putImageData(m,0,0),k(!1),w(!1)},B.postMessage({mapboxPixels:b,maposaicData:g,webglWidth:r,webglHeight:c,viewportHeight:o,viewportWidth:i,roadColorThreshold:I,similarColorTolerance:N});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=a?a.getCenter():new A.a.LngLat(2.338272,48.858796),n=a?a.getZoom():12;a&&a.remove();var r=new A.a.Map({container:i.current?i.current:"",style:d,zoom:n,center:t});r.on("load",(function(){c(r),r.resize()})),r.on("dragstart",k),r.on("zoomstart",k),r.on("render",(function(){!r.loaded()||r.isMoving()||r.isZooming()||(B.terminate(),B=new W.a,e(r),T([r.getCenter().lng,r.getCenter().lat]))}))}),[I,N,d]);var q=Object(n.useState)(!1),H=Object(g.a)(q,2),Q=H[0],M=H[1];return r.a.createElement("div",{className:"container"},r.a.createElement("canvas",{className:"mosaic-canvas",width:"300",height:"300",id:"maposaic-cvs"}),r.a.createElement("div",{id:"mapbox-cvs",className:"mapbox-canvas",ref:function(e){return i.current=e},style:R}),r.a.createElement(l.a,{spinning:y,indicator:r.a.createElement("img",{className:"spinner",src:h.a,alt:"spin"})}),r.a.createElement("div",{className:"overmap"},r.a.createElement(J,{visible:Q,setDrawerVisible:M,changeMapStyle:function(e){k(!0),w(!0),v(e)},mapboxStyleURL:d,setNewRoadColorThreshold:function(e){j(e),w(!0)},setNewSimilarColorTolerance:function(e){S(e),w(!0)},flyTo:function(e){a&&(k(!0),w(!0),a.setCenter(e))},currentCenter:V}),r.a.createElement(o.a,{type:"primary",shape:"circle",onClick:function(){M(!0)},icon:r.a.createElement(p.a,null)})))};var Z=function(){return r.a.createElement(S,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},89:function(e,t,a){e.exports=function(){return new Worker(a.p+"e60194eb2689f829a04c.worker.js")}}},[[124,1,2]]]);
//# sourceMappingURL=main.f7e1885d.chunk.js.map